@if (comic) {
  <div
    class="fixed top-0 bottom-0 left-0 right-0 max-h-screen max-w-screen z-40 bg-reader-background flex grow justify-center"
    swipe
    (next)="swipeNext()"
    (previous)="swipePrevious()"
    >
    <div class="relative w-full h-full flex justify-center pointer-events-none">
      @if (navigationDisplay) {
        <div
          class="absolute inset-0 z-10 bg-gradient-to-b from-black/90 via-transparent via-50% to-black/90 pointer-events-none"
        ></div>
      }
      <img
        (click)="toggleNavigation()"
        id="comicImage"
        class="relative max-h-full max-w-full object-contain group pointer-events-auto"
        />
      @if (navigationDisplay) {
        <div
          class="flex items-center gap-2 fixed top-0 h-16 w-full max-w-screen z-50 pointer-events-auto"
          >
          <app-back-button class="absolute left-0 top-1 text-white-text"></app-back-button>
          <div class="flex grow justify-center px-14 max-w-full">
            <h3
              class="text-xl font-bold text-white-text truncate text-center overflow-hidden whitespace-nowrap w-full"
              >
              {{ comic.title }}
            </h3>
          </div>
          <app-reader-settings-button
            class="absolute right-4 top-1 text-white-text"
            [comic]="comic"
            [page]="page"
            (onClosed)="loadPage()"
          ></app-reader-settings-button>
        </div>
      }
      @if (readerSettingsService.getValue('thumbnailNavigation')) {
        <div
          class="absolute px-8 bottom-0 pb-8 pt-4 w-full pointer-events-auto z-50"
          [class.hidden]="!navigationDisplay"
          >
          @if (doublePage$ | async; as doublePage) {
            <app-minipages-carousel
              [comic]="comic"
              [page]="page"
              [visible]="navigationDisplay"
              (pageChange)="onStepChange($event)"
              [doublePages]="doublePage === 'double'"
            ></app-minipages-carousel>
          }
        </div>
      }
      @if (navigationDisplay && !readerSettingsService.getValue('thumbnailNavigation')) {
        <div
          class="absolute px-8 bottom-0 pb-8 pt-4 w-full pointer-events-auto z-50"
          >
          <input
            [(ngModel)]="page"
            (ngModelChange)="onStepChange($event)"
            id="steps-range"
            type="range"
            min="0"
            [max]="comic.pages - 1"
            [value]="page"
            step="1"
            class="w-full h-2 bg-bar-slider-background rounded-lg appearance-none cursor-pointer"
            />
          <div class="flex w-full">
            <span class="text-lg text-white-text start-0 -bottom-6">{{ page }}</span>
            <span class="text-lg text-white-text start-0 -bottom-6 ml-auto">{{ comic.pages - 1 }}</span>
          </div>
        </div>
      }
    </div>
    <div (click)="previousPage(false)" class="fixed left-0 h-5/6 w-1/5 z-40"></div>
    <div (click)="nextPage(false)" class="fixed right-0 h-5/6 w-1/5 z-40"></div>
  </div>
}
